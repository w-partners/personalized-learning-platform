            font-size: 2rem;
            font-weight: 700;
            letter-spacing: 0.1em;
            margin: var(--space-md) 0;
        }
        
        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid rgba(255,255,255,.3);
            border-radius: 50%;
            border-top-color: #fff;
            animation: spin 1s ease-in-out infinite;
        }
        
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        
        @media (max-width: 768px) {
            .form-row {
                grid-template-columns: 1fr;
            }
            
            .concept-grid {
                grid-template-columns: 1fr;
            }
            
            .level-selector {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>🎓 학생 정보 등록</h1>
            <p>AI 학습도우미 예팸에서 개인화 학습을 위한 학생 정보를 입력해주세요</p>
        </div>

        <div class="form-card">
            <form id="studentForm">
                <!-- 기본 정보 -->
                <div class="form-section">
                    <h3 class="section-title">👤 기본 정보</h3>
                    <div class="form-row">
                        <div class="form-group">
                            <label class="form-label required" for="studentName">학생 이름</label>
                            <input type="text" id="studentName" class="form-input" placeholder="학생 이름을 입력하세요" required>
                            <div class="error-message" id="studentNameError"></div>
                        </div>
                        <div class="form-group">
                            <label class="form-label required" for="grade">학년</label>
                            <select id="grade" class="form-select" required>
                                <option value="">학년을 선택하세요</option>
                                <option value="초1">초등학교 1학년</option>
                                <option value="초2">초등학교 2학년</option>
                                <option value="초3">초등학교 3학년</option>
                                <option value="초4">초등학교 4학년</option>
                                <option value="초5">초등학교 5학년</option>
                                <option value="초6">초등학교 6학년</option>
                                <option value="중1">중학교 1학년</option>
                                <option value="중2">중학교 2학년</option>
                                <option value="중3">중학교 3학년</option>
                                <option value="고1">고등학교 1학년</option>
                                <option value="고2">고등학교 2학년</option>
                                <option value="고3">고등학교 3학년</option>
                            </select>
                            <div class="error-message" id="gradeError"></div>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label class="form-label" for="school">학교명</label>
                            <input type="text" id="school" class="form-input" placeholder="학교명을 입력하세요">
                        </div>
                        <div class="form-group">
                            <label class="form-label" for="class">반</label>
                            <input type="text" id="class" class="form-input" placeholder="반을 입력하세요">
                        </div>
                    </div>
                </div>

                <!-- 학습 목표 -->
                <div class="form-section">
                    <h3 class="section-title">🎯 학습 목표</h3>
                    <div class="form-group">
                        <label class="form-label" for="learningGoals">주요 학습 목표</label>
                        <textarea id="learningGoals" class="form-input" rows="4" placeholder="예: 수학 기초 실력 향상, 영어 회화 능력 개발 등 학습 목표를 입력하세요"></textarea>
                    </div>
                </div>

                <!-- 개념별 이해도 평가 -->
                <div class="form-section">
                    <h3 class="section-title">📊 개념별 이해도 평가</h3>
                    <p style="color: var(--neutral-600); margin-bottom: var(--space-lg);">
                        각 과목별 주요 개념에 대한 현재 이해도를 1-5점으로 평가해주세요.
                    </p>
                    
                    <div class="concept-grid">
                        <!-- 수학 -->
                        <div class="concept-item">
                            <h4>📐 수학 - 기초연산</h4>
                            <div class="level-selector" data-concept="math-basic">
                                <button type="button" class="level-btn" data-level="1">1</button>
                                <button type="button" class="level-btn" data-level="2">2</button>
                                <button type="button" class="level-btn" data-level="3">3</button>
                                <button type="button" class="level-btn" data-level="4">4</button>
                                <button type="button" class="level-btn" data-level="5">5</button>
                            </div>
                        </div>
                        
                        <div class="concept-item">
                            <h4>📈 수학 - 함수</h4>
                            <div class="level-selector" data-concept="math-function">
                                <button type="button" class="level-btn" data-level="1">1</button>
                                <button type="button" class="level-btn" data-level="2">2</button>
                                <button type="button" class="level-btn" data-level="3">3</button>
                                <button type="button" class="level-btn" data-level="4">4</button>
                                <button type="button" class="level-btn" data-level="5">5</button>
                            </div>
                        </div>
                        
                        <!-- 영어 -->
                        <div class="concept-item">
                            <h4>🔤 영어 - 어휘</h4>
                            <div class="level-selector" data-concept="english-vocabulary">
                                <button type="button" class="level-btn" data-level="1">1</button>
                                <button type="button" class="level-btn" data-level="2">2</button>
                                <button type="button" class="level-btn" data-level="3">3</button>
                                <button type="button" class="level-btn" data-level="4">4</button>
                                <button type="button" class="level-btn" data-level="5">5</button>
                            </div>
                        </div>
                        
                        <div class="concept-item">
                            <h4>📖 영어 - 문법</h4>
                            <div class="level-selector" data-concept="english-grammar">
                                <button type="button" class="level-btn" data-level="1">1</button>
                                <button type="button" class="level-btn" data-level="2">2</button>
                                <button type="button" class="level-btn" data-level="3">3</button>
                                <button type="button" class="level-btn" data-level="4">4</button>
                                <button type="button" class="level-btn" data-level="5">5</button>
                            </div>
                        </div>
                        
                        <!-- 과학 -->
                        <div class="concept-item">
                            <h4>🔬 과학 - 물리</h4>
                            <div class="level-selector" data-concept="science-physics">
                                <button type="button" class="level-btn" data-level="1">1</button>
                                <button type="button" class="level-btn" data-level="2">2</button>
                                <button type="button" class="level-btn" data-level="3">3</button>
                                <button type="button" class="level-btn" data-level="4">4</button>
                                <button type="button" class="level-btn" data-level="5">5</button>
                            </div>
                        </div>
                        
                        <div class="concept-item">
                            <h4>🧪 과학 - 화학</h4>
                            <div class="level-selector" data-concept="science-chemistry">
                                <button type="button" class="level-btn" data-level="1">1</button>
                                <button type="button" class="level-btn" data-level="2">2</button>
                                <button type="button" class="level-btn" data-level="3">3</button>
                                <button type="button" class="level-btn" data-level="4">4</button>
                                <button type="button" class="level-btn" data-level="5">5</button>
                            </div>
                        </div>
                    </div>
                    
                    <div style="margin-top: var(--space-lg); font-size: 0.9rem; color: var(--neutral-600);">
                        <strong>평가 기준:</strong> 1점(매우 어려움) ~ 5점(매우 잘함)
                    </div>
                </div>

                <div class="submit-section">
                    <button type="submit" class="submit-btn">
                        <span class="btn-text">✨ 학생 정보 등록하기</span>
                        <span class="loading" style="display: none;"></span>
                    </button>
                </div>
            </form>

            <!-- 학생 코드 표시 영역 -->
            <div id="studentCodeDisplay" class="student-code-display" style="display: none;">
                <h3>🎉 학생 등록 완료!</h3>
                <p>학생 코드가 발급되었습니다</p>
                <div class="student-code" id="generatedCode"></div>
                <p style="font-size: 0.9rem; opacity: 0.9;">
                    이 코드를 기억해 두시거나 메모해 주세요.<br>
                    ChatGPT에서 개인화 학습 지원을 받을 때 사용됩니다.
                </p>
                <button type="button" class="btn btn-outline" onclick="copyCode()" style="margin-top: var(--space-lg); background: rgba(255,255,255,0.2); border-color: white; color: white;">
                    📋 코드 복사하기
                </button>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const form = document.getElementById('studentForm');
            const submitBtn = document.querySelector('.submit-btn');
            const btnText = document.querySelector('.btn-text');
            const loading = document.querySelector('.loading');
            const codeDisplay = document.getElementById('studentCodeDisplay');
            const generatedCode = document.getElementById('generatedCode');
            
            const conceptLevels = {};

            // 개념별 레벨 선택 이벤트
            document.querySelectorAll('.level-selector').forEach(selector => {
                const concept = selector.dataset.concept;
                const buttons = selector.querySelectorAll('.level-btn');
                
                buttons.forEach(btn => {
                    btn.addEventListener('click', function(e) {
                        e.preventDefault();
                        
                        // 같은 그룹 내 버튼들 비활성화
                        buttons.forEach(b => b.classList.remove('active'));
                        
                        // 클릭한 버튼 활성화
                        this.classList.add('active');
                        
                        // 레벨 저장
                        conceptLevels[concept] = parseInt(this.dataset.level);
                    });
                });
            });

            // 폼 제출
            form.addEventListener('submit', async function(e) {
                e.preventDefault();
                
                if (!validateForm()) {
                    return;
                }
                
                setLoading(true);
                
                try {
                    await registerStudent();
                } catch (error) {
                    console.error('학생 등록 오류:', error);
                    showToast('학생 등록에 실패했습니다. 다시 시도해주세요.', 'error');
                } finally {
                    setLoading(false);
                }
            });

            // 폼 검증
            function validateForm() {
                clearErrors();
                let isValid = true;

                // 필수 필드 검증
                const studentName = document.getElementById('studentName').value.trim();
                const grade = document.getElementById('grade').value;

                if (!studentName) {
                    showError('studentName', '학생 이름을 입력해주세요.');
                    isValid = false;
                }

                if (!grade) {
                    showError('grade', '학년을 선택해주세요.');
                    isValid = false;
                }

                return isValid;
            }

            // 학생 등록
            async function registerStudent() {
                const studentData = {
                    name: document.getElementById('studentName').value.trim(),
                    grade: document.getElementById('grade').value,
                    school: document.getElementById('school').value.trim(),
                    class: document.getElementById('class').value.trim(),
                    learningGoals: document.getElementById('learningGoals').value.trim(),
                    conceptLevels: conceptLevels,
                    registeredAt: new Date().toISOString()
                };

                try {
                    // 백엔드 API 호출
                    const response = await fetch('/api/students/register', {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                            'Authorization': `Bearer ${localStorage.getItem('authToken')}`
                        },
                        body: JSON.stringify(studentData)
                    });
                    
                    if (response.ok) {
                        const data = await response.json();
                        displayStudentCode(data.studentCode);
                    } else {
                        const errorData = await response.json();
                        showToast(errorData.message || '학생 등록에 실패했습니다.', 'error');
                    }
                } catch (error) {
                    // API 서버가 없는 경우 임시 처리
                    console.warn('API 서버 연결 실패, 임시 학생 등록 처리');
                    
                    // 간단한 학생 코드 생성 (정보 노출 없는)
                    const code = generateSimpleStudentCode();
                    
                    // 로컬 스토리지에 저장
                    const students = JSON.parse(localStorage.getItem('tempStudents') || '[]');
                    students.push({
                        ...studentData,
                        studentCode: code,
                        id: Date.now()
                    });
                    localStorage.setItem('tempStudents', JSON.stringify(students));
                    
                    displayStudentCode(code);
                }
            }

            // 간단한 학생 코드 생성 (정보 노출 없는)
            function generateSimpleStudentCode() {
                const prefixes = ['STAR', 'HERO', 'WISE', 'BRIGHT', 'SMART'];
                const prefix = prefixes[Math.floor(Math.random() * prefixes.length)];
                const number = Math.floor(Math.random() * 9000) + 1000; // 1000-9999
                return `${prefix}${number}`;
            }

            // 학생 코드 표시
            function displayStudentCode(code) {
                generatedCode.textContent = code;
                form.style.display = 'none';
                codeDisplay.style.display = 'block';
                
                showToast('학생 등록이 완료되었습니다!', 'success');
                
                // 코드를 클립보드에 자동 복사
                navigator.clipboard.writeText(code).then(() => {
                    console.log('학생 코드가 클립보드에 복사되었습니다.');
                });
            }

            // 에러 표시/제거
            function showError(field, message) {
                const errorElement = document.getElementById(field + 'Error');
                const inputElement = document.getElementById(field);
                
                if (errorElement && inputElement) {
                    errorElement.textContent = message;
                    inputElement.classList.add('error');
                }
            }

            function clearErrors() {
                document.querySelectorAll('.error-message').forEach(el => el.textContent = '');
                document.querySelectorAll('.form-input, .form-select').forEach(el => el.classList.remove('error'));
            }

            // 로딩 상태
            function setLoading(isLoading) {
                submitBtn.disabled = isLoading;
                btnText.style.display = isLoading ? 'none' : 'inline';
                loading.style.display = isLoading ? 'inline-block' : 'none';
            }

            // 토스트 메시지
            function showToast(message, type = 'info') {
                const toast = document.createElement('div');
                toast.style.cssText = `
                    position: fixed;
                    top: 20px;
                    right: 20px;
                    background: ${type === 'success' ? 'var(--success)' : type === 'error' ? 'var(--error)' : 'var(--info)'};
                    color: white;
                    padding: var(--space-md);
                    border-radius: var(--radius-md);
                    z-index: 1000;
                    transform: translateX(400px);
                    transition: transform var(--transition-base);
                `;
                toast.textContent = message;
                
                document.body.appendChild(toast);
                
                setTimeout(() => {
                    toast.style.transform = 'translateX(0)';
                }, 100);
                
                setTimeout(() => {
                    toast.style.transform = 'translateX(400px)';
                    setTimeout(() => toast.remove(), 300);
                }, 3000);
            }

            console.log('🎓 학생 정보 등록 페이지 로드 완료');
        });

        // 코드 복사 함수
        function copyCode() {
            const code = document.getElementById('generatedCode').textContent;
            navigator.clipboard.writeText(code).then(() => {
                showToast('학생 코드가 복사되었습니다!', 'success');
            });
        }

        function showToast(message, type = 'info') {
            const toast = document.createElement('div');
            toast.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                background: ${type === 'success' ? '#27AE60' : type === 'error' ? '#E74C3C' : '#3498DB'};
                color: white;
                padding: 1rem;
                border-radius: 8px;
                z-index: 1000;
                transform: translateX(400px);
                transition: transform 0.2s ease-out;
            `;
            toast.textContent = message;
            
            document.body.appendChild(toast);
            
            setTimeout(() => {
                toast.style.transform = 'translateX(0)';
            }, 100);
            
            setTimeout(() => {
                toast.style.transform = 'translateX(400px)';
                setTimeout(() => toast.remove(), 300);
            }, 3000);
        }
    </script>
</body>
</html>
